(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(9),r=a.n(s),o=(a(16),a(7)),c=a(2),l=a(3),u=a(5),m=a(4),h=a(1),d=a(6);function v(e){return Math.ceil(5*Math.random()*e)+1}function f(e){var t=e.symbol,a=e.evaluation;return function(e,n){var i,s;do{s=Array(2).fill(null).map(function(){return v(e)}).sort(function(e,t){return t-e}),i=a.apply(void 0,Object(o.a)(s))}while(i%1!==0);return{symbol:t,param:s,answer:i,key:n}}}var p=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"generateOperation",value:function(e){var t=e.key,a=e.difficulty,n=this.operations.multiplication,i=function(e){var t=Object.keys(e),a=Math.floor(Math.random()*t.length);return a===t.length?e[t[0]]:e[t[a]]}(this.operations);return i===n&&(a/=2),i(a,t)}}]),e}();p.operations={division:f({symbol:"/",evaluation:function(e,t){return e/t}}),multiplication:f({symbol:"*",evaluation:function(e,t){return e*t}}),sum:f({symbol:"+",evaluation:function(e,t){return e+t}}),sub:f({symbol:"-",evaluation:function(e,t){return e-t}})};var g=p,b=100,y=20;var E=function(e){var t,a,n=e.operations,s=e.movingDown,r=0,o=n.length-1,c=n.map(function(e,n){var c=e.symbol,l=e.param,u=e.key,m="".concat(l[0]," ").concat(c," ").concat(l[1]);if(r+=b*n/o+y,s){var h=(n+1)/o;a=b*h+y,t={color:"rgba(255,255,255,".concat(.9*h+.1,")"),height:"".concat(a,"px"),fontSize:"".concat(2*h+.1,"em"),transition:"all .2s",transform:"translateY(0)"}}else{var d=n/o;a=b*d+y,t={color:"rgba(255,255,255,".concat(.9*d+.1,")"),height:"".concat(a,"px"),fontSize:"".concat(2*d+.1,"em"),transition:"none",transform:"translateY(-".concat(y,"px)")}}return i.a.createElement("div",{className:"card",key:u,style:t},i.a.createElement("span",null,m))}),l={height:"".concat(r,"px")};return i.a.createElement("div",{className:"cardContainer",style:l},c)},S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={value:"",answer:a.props.answer},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),e.target.value===this.props.answer&&(this.props.onSuccess(),this.setState({value:""}))}},{key:"render",value:function(){return i.a.createElement("input",{className:"inputAnswer",type:"text",value:this.state.value,onChange:this.handleChange})}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleTransitionEnd=a.handleTransitionEnd.bind(Object(h.a)(a)),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a.state={fade:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.setState({fade:!0})},0)}},{key:"handleTransitionEnd",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!1===this.state.fade&&(this.props.startGame(),this.setState({fade:!0}))}},{key:"handleClick",value:function(){this.setState({fade:!1}),this.props.generateGame()}},{key:"render",value:function(){var e=this,t=this.props.score,a="menu "+(this.state.fade?"menu__fade":"");return console.log(a),0===t?i.a.createElement("div",{className:a,onTransitionEnd:function(){return e.handleTransitionEnd(!1)}},i.a.createElement("div",{className:"menu__textContainer"},i.a.createElement("h2",{className:"menu__title"}," Matemagico "),i.a.createElement("h3",{className:"menu__sub"}," Bienvenido ")),i.a.createElement("div",{className:"menu__buttons"},i.a.createElement("span",{className:"menu__startButton",onClick:this.handleClick}," Comenzar "))):i.a.createElement("div",{className:a,onTransitionEnd:function(){return e.handleTransitionEnd(!0)}},i.a.createElement("div",{className:"menu__textContainer"},i.a.createElement("h2",{className:"menu__title"}," Matemagico "),i.a.createElement("span",{className:"menu__sub"}," Tu puntaje fue de ",t," ")),i.a.createElement("div",{className:"menu__buttons"},i.a.createElement("span",{className:"menu__startButton",onClick:this.handleClick}," Jugar de nuevo ")))}}]),t}(n.Component),O=0,k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onSuccess=a.onSuccess.bind(Object(h.a)(a)),a.createNewOperation=a.createNewOperation.bind(Object(h.a)(a)),a.startCounter=a.startCounter.bind(Object(h.a)(a)),a.handleLose=a.handleLose.bind(Object(h.a)(a)),a.getStartingState=a.getStartingState.bind(Object(h.a)(a)),a.generateGame=a.generateGame.bind(Object(h.a)(a)),a.startGame=a.startGame.bind(Object(h.a)(a)),a.state=a.getStartingState(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({isPlaying:!1,maxScore:localStorage.getItem("maxScore")||0})}},{key:"getStartingState",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],a=0;a<6;a++){var n=g.generateOperation({key:O++,difficulty:e});t.push(n)}return{operations:t,movingDown:!1,difficulty:e,activeOperation:t[t.length-1],delay:1,timeLeft:5e3,score:0,isPlaying:!1,isCounting:!1}}},{key:"startCounter",value:function(){var e=this,t=(new Date).getTime();this.setState({isCounting:!0});var a=setInterval(function(){var n=(new Date).getTime(),i=n-t,s=e.state.timeLeft-i;s<0&&(e.handleLose(),clearInterval(a),s=0),e.setState(function(){return{timeLeft:s}}),t=n},100)}},{key:"handleLose",value:function(){var e=this.state.maxScore;this.setState({isPlaying:!1}),e>localStorage.getItem("maxScore")&&localStorage.setItem("maxScore",e)}},{key:"createNewOperation",value:function(){var e=this.state,t=e.delay,a=e.difficulty,n=e.operations,i=[g.generateOperation({key:O++,difficulty:a})].concat(Object(o.a)(n)).slice(0,6);this.setState({operations:i,difficulty:a+.15,movingDown:!1,delay:t-1})}},{key:"onSuccess",value:function(){var e=this,t=this.state,a=t.operations,n=t.delay,i=t.timeLeft,s=t.score,r=t.maxScore,o=s+20;o>r&&(r=o),t.isCounting||this.startCounter(),this.setState({movingDown:!0,activeOperation:a[a.length-n-1],delay:n+1,timeLeft:i+1e3,score:o,maxScore:r}),setTimeout(function(){e.createNewOperation()},200)}},{key:"generateGame",value:function(){this.setState(this.getStartingState())}},{key:"startGame",value:function(){this.setState({isPlaying:!0})}},{key:"render",value:function(){var e=this.state,t=e.operations,a=e.movingDown,n=e.activeOperation,s=e.timeLeft,r=e.isPlaying,o=e.score,c=e.maxScore,l=Math.ceil(s/1e3);return i.a.createElement("div",{className:"container"},r?null:i.a.createElement(_,{isPlaying:r,score:o,generateGame:this.generateGame,startGame:this.startGame}),i.a.createElement("div",{className:"gameContainer"},i.a.createElement("div",{className:"time-left"},i.a.createElement("div",{className:"stats__container"},i.a.createElement("span",{className:"stats__sub"},"Time left"),i.a.createElement("span",{className:"stats__main"},l))),i.a.createElement("div",{className:"score"},i.a.createElement("div",{className:"stats__container"},i.a.createElement("span",{className:"stats__sub"},"Max score"),i.a.createElement("span",{className:"stats__main"},c)),i.a.createElement("div",{className:"stats__container"},i.a.createElement("span",{className:"stats__sub"},"Score"),i.a.createElement("span",{className:"stats__main"},o))),i.a.createElement("div",{className:"game__content"},i.a.createElement(E,{operations:t,movingDown:a}),i.a.createElement(S,{answer:n.answer.toString(),onSuccess:this.onSuccess}))))}}]),t}(n.Component);var N=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.a5ed5c0f.chunk.js.map